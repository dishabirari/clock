<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Photo Clock</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* General body and container styles for a clean layout */
        body {
            background-color: #f0f4f8; /* Light gray background color */
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            flex-direction: column;
        }

        .main-container {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 2rem;
            flex-wrap: wrap; 
            justify-content: center;
        }

        /* Styles for the main clock container */
        .clock-container {
            position: relative;
            width: 450px;
            height: 450px;
            border-radius: 50%;
            background: #ffffff;
            box-shadow: 20px 20px 60px #d0d0d0, -20px -20px 60px #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease-in-out;
            margin: 2rem;
            border: 2px solid #000;
        }

        .clock-container:hover {
            transform: scale(1.05);
        }

        /* Analog clock hands and center dot */
        .hand {
            position: absolute;
            background: #333;
            border-radius: 50%;
            transform-origin: bottom center;
            z-index: 5;
        }

        .hour-hand {
            width: 8px;
            height: 100px;
            top: 125px;
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
        }

        .minute-hand {
            width: 6px;
            height: 140px;
            top: 85px;
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
            background: #555;
        }

        .second-hand {
            width: 2px;
            height: 180px;
            top: 45px;
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
            background: #ef4444; /* red-500 */
        }
        
        .center-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #333;
            border-radius: 50%;
            z-index: 15;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }

        /* Clock number positioning */
        .clock-number {
            position: absolute;
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
        }
        #number-12 { top: 20px; left: 50%; transform: translateX(-50%); }
        #number-3 { top: 50%; right: 20px; transform: translateY(-50%); }
        #number-6 { bottom: 20px; left: 50%; transform: translateX(-50%); }
        #number-9 { top: 50%; left: 20px; transform: translateY(-50%); }

        /* Photo slot styles */
        .photo-slot {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            overflow: hidden; /* This clips the inner photo to a circle */
            border: 4px solid rgba(255, 255, 255, 0.8);
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2), 2px 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .photo-slot:hover {
            transform: scale(1.1);
        }
        
        /* Text for adding a photo */
        .photo-slot .add-photo-text {
            color: #4B5563;
            font-size: 0.875rem;
            font-weight: 600;
            text-align: center;
            padding: 0.5rem;
            line-height: 1.2;
            transition: opacity 0.2s ease-in-out;
            z-index: 2; /* Ensures text is above all photo layers */
        }

        /* The actual photo inside the circle */
        .photo-slot .photo-image {
            position: relative; /* Stays within the clipped circle */
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            z-index: 1;
            /* Use CSS variables for drag and zoom */
            transform: scale(var(--zoom-level, 1)) translate(var(--translate-x, 0px), var(--translate-y, 0px));
        }

        /* Style for when a photo is present */
        .photo-slot.has-image .photo-image {
            cursor: grab;
            opacity: 1;
        }
        .photo-slot.has-image .photo-image.dragging {
            cursor: grabbing;
        }
        .photo-slot.has-image .add-photo-text {
            opacity: 0; /* Hides the text when a photo is present */
        }

        /* Position for the photo-group containers */
        .photo-group {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        /* Positioning the photo slots */
        #photo-group-1 { top: 50px; left: 50%; transform: translateX(-50%); }
        #photo-group-2 { top: 50%; right: 50px; transform: translateY(-50%); }
        #photo-group-3 { bottom: 50px; left: 50%; transform: translateX(-50%); }
        #photo-group-4 { top: 50%; left: 50px; transform: translateY(-50%); }

        .file-input { display: none; }

        /* Styles for the zoom controls */
        .photo-controls {
            display: flex;
            gap: 5px;
            z-index: 20;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
        }

        .photo-group.has-image .photo-controls {
            opacity: 1;
        }

        .photo-controls button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s ease-in-out;
        }

        .photo-controls button:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }

        /* Status table styles */
        .status-table {
            width: 250px;
            background: #ffffff;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 20px 20px 60px #d0d0d0, -20px -20px 60px #ffffff;
        }

        .status-table th, .status-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .status-table th {
            font-weight: bold;
            color: #333;
        }

        .status-table .status-icon {
            font-size: 1.5rem;
            display: inline-block;
            width: 1.5em;
            text-align: center;
        }

        .status-table .status-icon.added {
            color: #10B981; /* green-500 */
        }

        .status-table .status-icon.empty {
            color: #EF4444; /* red-500 */
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col justify-center items-center min-h-screen p-4">
    <div class="main-container">
        <!-- Main clock container -->
        <div class="clock-container">
            <!-- Clock numbers -->
            <div id="number-12" class="clock-number">12</div>
            <div id="number-3" class="clock-number">3</div>
            <div id="number-6" class="clock-number">6</div>
            <div id="number-9" class="clock-number">9</div>
            
            <!-- Analog clock hands -->
            <div id="hour-hand" class="hand hour-hand"></div>
            <div id="minute-hand" class="hand minute-hand"></div>
            <div id="second-hand" class="hand second-hand"></div>
            <div class="center-dot"></div>
            
            <!-- Photo slots with new structure -->
            <div id="photo-group-1" class="photo-group">
                <div id="photo-1" class="photo-slot">
                    <span class="add-photo-text">Add Photo1</span>
                    <img id="image-1" src="" alt="User Photo" class="photo-image">
                    <input type="file" id="file-1" class="file-input" accept="image/*">
                </div>
                <div class="photo-controls">
                    <button class="zoom-in" data-photo-id="1">+</button>
                    <button class="zoom-out" data-photo-id="1">-</button>
                </div>
            </div>

            <div id="photo-group-2" class="photo-group">
                <div id="photo-2" class="photo-slot">
                    <span class="add-photo-text">Add Photo2</span>
                    <img id="image-2" src="" alt="User Photo" class="photo-image">
                    <input type="file" id="file-2" class="file-input" accept="image/*">
                </div>
                <div class="photo-controls">
                    <button class="zoom-in" data-photo-id="2">+</button>
                    <button class="zoom-out" data-photo-id="2">-</button>
                </div>
            </div>

            <div id="photo-group-3" class="photo-group">
                <div id="photo-3" class="photo-slot">
                    <span class="add-photo-text">Add Photo3</span>
                    <img id="image-3" src="" alt="User Photo" class="photo-image">
                    <input type="file" id="file-3" class="file-input" accept="image/*">
                </div>
                <div class="photo-controls">
                    <button class="zoom-in" data-photo-id="3">+</button>
                    <button class="zoom-out" data-photo-id="3">-</button>
                </div>
            </div>

            <div id="photo-group-4" class="photo-group">
                <div id="photo-4" class="photo-slot">
                    <span class="add-photo-text">Add Photo4</span>
                    <img id="image-4" src="" alt="User Photo" class="photo-image">
                    <input type="file" id="file-4" class="file-input" accept="image/*">
                </div>
                <div class="photo-controls">
                    <button class="zoom-in" data-photo-id="4">+</button>
                    <button class="zoom-out" data-photo-id="4">-</button>
                </div>
            </div>
        </div>

        <!-- New status table -->
        <div class="status-table">
            <h2 class="text-xl font-bold mb-4">Photo Status</h2>
            <table class="w-full">
                <thead>
                    <tr>
                        <th>Photo Slot</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="status-row-1">
                        <td>Photo 1</td>
                        <td id="status-1" class="status-icon empty">❌</td>
                    </tr>
                    <tr id="status-row-2">
                        <td>Photo 2</td>
                        <td id="status-2" class="status-icon empty">❌</td>
                    </tr>
                    <tr id="status-row-3">
                        <td>Photo 3</td>
                        <td id="status-3" class="status-icon empty">❌</td>
                    </tr>
                    <tr id="status-row-4">
                        <td>Photo 4</td>
                        <td id="status-4" class="status-icon empty">❌</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div id="message-box" class="mt-4 p-3 bg-gray-200 text-gray-700 rounded-lg shadow-inner hidden"></div>

    <script>
        // Get references to all the elements
        const hourHand = document.getElementById('hour-hand');
        const minuteHand = document.getElementById('minute-hand');
        const secondHand = document.getElementById('second-hand');
        const messageBox = document.getElementById('message-box');
        
        // Photo slots and their corresponding file inputs
        const photoItems = [
            { id: '1', item: document.getElementById('photo-group-1'), slot: document.getElementById('photo-1'), img: document.getElementById('image-1'), file: document.getElementById('file-1') },
            { id: '2', item: document.getElementById('photo-group-2'), slot: document.getElementById('photo-2'), img: document.getElementById('image-2'), file: document.getElementById('file-2') },
            { id: '3', item: document.getElementById('photo-group-3'), slot: document.getElementById('photo-3'), img: document.getElementById('image-3'), file: document.getElementById('file-3') },
            { id: '4', item: document.getElementById('photo-group-4'), slot: document.getElementById('photo-4'), img: document.getElementById('image-4'), file: document.getElementById('file-4') }
        ];
        // Get references to the status icons
        const statusIcons = {
            '1': document.getElementById('status-1'),
            '2': document.getElementById('status-2'),
            '3': document.getElementById('status-3'),
            '4': document.getElementById('status-4')
        };

        // Function to show a message to the user
        function showMessage(text, type = 'info') {
            messageBox.textContent = text;
            messageBox.classList.remove('hidden');
            messageBox.classList.remove('bg-red-200', 'text-red-800', 'bg-green-200', 'text-green-800', 'bg-gray-200', 'text-gray-700');
            if (type === 'error') {
                messageBox.classList.add('bg-red-200', 'text-red-800');
            } else if (type === 'success') {
                messageBox.classList.add('bg-green-200', 'text-green-800');
            } else {
                messageBox.classList.add('bg-gray-200', 'text-gray-700');
            }
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); // Hide message after 3 seconds
        }

        // Function to update the analog clock
        function updateClock() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            // Calculate and set rotation for analog hands
            const hourDeg = (hours % 12) * 30 + (minutes * 0.5); // 360/12 = 30 deg/hour
            const minuteDeg = minutes * 6 + (seconds * 0.1); // 360/60 = 6 deg/minute
            const secondDeg = seconds * 6; // 360/60 = 6 deg/second

            hourHand.style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
            minuteHand.style.transform = `translateX(-50%) rotate(${minuteDeg}deg)`;
            secondHand.style.transform = `translateX(-50%) rotate(${secondDeg}deg)`;
        }
        
        // Set the clock to update every second
        setInterval(updateClock, 1000);
        updateClock(); // Initial call to set the time immediately

        // Function to update the image transform (zoom and position) using CSS variables
        function updateImageTransform(imgElement, scale, translateX, translateY) {
            const parentSlot = imgElement.parentElement;
            parentSlot.style.setProperty('--zoom-level', scale);
            parentSlot.style.setProperty('--translate-x', `${translateX}px`);
            parentSlot.style.setProperty('--translate-y', `${translateY}px`);
        }
        
        // Function to update the status table
        function updateStatus(id, hasImage) {
            const statusElement = statusIcons[id];
            if (statusElement) {
                if (hasImage) {
                    statusElement.textContent = '✅';
                    statusElement.classList.remove('empty');
                    statusElement.classList.add('added');
                } else {
                    statusElement.textContent = '❌';
                    statusElement.classList.remove('added');
                    statusElement.classList.add('empty');
                }
            }
        }

        // Add event listeners for each photo item
        photoItems.forEach(item => {
            let isDragging = false;
            let startX, startY, initialX, initialY;
            let currentScale = 1;

            // Clicking the photo slot itself triggers the file input
            item.slot.addEventListener('click', (event) => {
                // Ensure the click is not on the image itself, which handles drag/drop
                if (!event.target.closest('.photo-image')) {
                    item.file.click();
                }
            });

            // Handle file selection
            item.file.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const base64Image = e.target.result;
                        item.img.src = base64Image;
                        item.slot.classList.add('has-image');
                        item.item.classList.add('has-image');
                        
                        currentScale = 1;
                        updateImageTransform(item.img, currentScale, 0, 0);
                        showMessage(`Photo added successfully to slot ${item.id}!`, 'success');
                        updateStatus(item.id, true);
                    };
                    reader.onerror = function() {
                        showMessage('Failed to load image. Please try again.', 'error');
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Handle double-tap to remove an image
            item.slot.addEventListener('dblclick', (event) => {
                event.preventDefault(); 
                
                if (item.slot.classList.contains('has-image')) {
                    item.img.src = '';
                    item.slot.classList.remove('has-image');
                    item.item.classList.remove('has-image');
                    currentScale = 1;
                    updateImageTransform(item.img, currentScale, 0, 0);
                    showMessage(`Photo removed from slot ${item.id}!`, 'success');
                    updateStatus(item.id, false);
                }
            });

            // --- Drag and Drop Functionality ---
            item.img.addEventListener('mousedown', (e) => {
                if (item.slot.classList.contains('has-image')) {
                    e.preventDefault();
                    e.stopPropagation();
                    isDragging = true;
                    item.img.classList.add('dragging');
                    startX = e.clientX;
                    startY = e.clientY;
                    initialX = parseFloat(item.slot.style.getPropertyValue('--translate-x')) || 0;
                    initialY = parseFloat(item.slot.style.getPropertyValue('--translate-y')) || 0;
                }
            });

            item.img.addEventListener('touchstart', (e) => {
                if (item.slot.classList.contains('has-image')) {
                    e.preventDefault();
                    e.stopPropagation();
                    isDragging = true;
                    item.img.classList.add('dragging');
                    const touch = e.touches[0];
                    startX = touch.clientX;
                    startY = touch.clientY;
                    initialX = parseFloat(item.slot.style.getPropertyValue('--translate-x')) || 0;
                    initialY = parseFloat(item.slot.style.getPropertyValue('--translate-y')) || 0;
                }
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const dx = e.clientX - startX;
                    const dy = e.clientY - startY;
                    const newX = initialX + dx;
                    const newY = initialY + dy;
                    updateImageTransform(item.img, currentScale, newX, newY);
                }
            });

            document.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    const touch = e.touches[0];
                    const dx = touch.clientX - startX;
                    const dy = touch.clientY - startY;
                    const newX = initialX + dx;
                    const newY = initialY + dy;
                    updateImageTransform(item.img, currentScale, newX, newY);
                }
            });

            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    item.img.classList.remove('dragging');
                }
            });

            document.addEventListener('touchend', () => {
                if (isDragging) {
                    isDragging = false;
                    item.img.classList.remove('dragging');
                }
            });

            // --- Zoom Functionality ---
            const zoomInBtn = item.item.querySelector('.zoom-in');
            const zoomOutBtn = item.item.querySelector('.zoom-out');

            if (zoomInBtn) {
                zoomInBtn.addEventListener('click', (event) => {
                    event.stopPropagation();
                    currentScale = currentScale < 2 ? currentScale + 0.1 : currentScale;
                    const translateX = parseFloat(item.slot.style.getPropertyValue('--translate-x')) || 0;
                    const translateY = parseFloat(item.slot.style.getPropertyValue('--translate-y')) || 0;
                    updateImageTransform(item.img, currentScale, translateX, translateY);
                });
            }

            if (zoomOutBtn) {
                zoomOutBtn.addEventListener('click', (event) => {
                    event.stopPropagation();
                    currentScale = currentScale > 1 ? currentScale - 0.1 : currentScale;
                    const translateX = parseFloat(item.slot.style.getPropertyValue('--translate-x')) || 0;
                    const translateY = parseFloat(item.slot.style.getPropertyValue('--translate-y')) || 0;
                    updateImageTransform(item.img, currentScale, translateX, translateY);
                });
            }
        });
    </script>
</body>
</html>